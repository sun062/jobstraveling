<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¡ìŠ¤ë¦¬í¬íŠ¸ ê¸°ë¡ í¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8f9fa; }
        .form-container { max-width: 800px; margin: 0 auto; padding: 20px; background-color: white; border-radius: 12px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); }
        .input-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #333; }
        .input-group input, .input-group select, .input-group textarea {
            width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 8px; transition: border-color 0.3s;
        }
        .input-group input:focus, .input-group textarea:focus { border-color: #3b82f6; outline: none; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3); }
        .required::after { content: '*'; color: #ef4444; margin-left: 4px; }
        .rating-stars input[type="radio"] { display: none; }
        .rating-stars label {
            font-size: 2rem; color: #d1d5db; cursor: pointer; transition: color 0.2s;
        }
        .rating-stars input[type="radio"]:checked ~ label,
        .rating-stars input[type="radio"]:hover ~ label,
        .rating-stars label:hover { color: #facc15; }
        .rating-stars { direction: rtl; }
        .rating-stars > label { direction: ltr; }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        #submit-btn {
            background-color: #3b82f6; /* Blue */
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1.125rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
            width: 100%;
            margin-top: 20px;
        }
        #submit-btn:hover {
            background-color: #2563eb;
            transform: translateY(-1px);
        }
    </style>
    <!-- Streamlit Component API ë¡œë“œ -->
    <script src="https://cdn.jsdelivr.net/npm/@streamlit/lib@0.2.3/dist/streamlit-component-lib.js"></script>
</head>
<body>
    <div class="form-container">
        <!-- onsubmitì„ ë§‰ì•„ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ì„ ë°©ì§€ -->
        <form id="report-form" oninput="sendDataToStreamlit(false)" onsubmit="event.preventDefault(); return false;">
            <div class="space-y-6">
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- í”„ë¡œê·¸ë¨ëª… (í•„ìˆ˜) -->
                    <div class="input-group">
                        <label for="programName" class="required">ì²´í—˜ í”„ë¡œê·¸ë¨ëª…</label>
                        <input type="text" id="programName" placeholder="ì˜ˆ: êµ¬ê¸€ ê°œë°œì ìº í”„" required>
                    </div>

                    <!-- ì²´í—˜ ì¼ì (í•„ìˆ˜) -->
                    <div class="input-group">
                        <label for="experienceDate" class="required">ì²´í—˜ ì¼ì</label>
                        <input type="date" id="experienceDate" required>
                    </div>
                </div>

                <!-- ì§ì—… ë¶„ì•¼ -->
                <div class="input-group">
                    <label for="jobField">ê´€ë ¨ ì§ì—…/ë¶„ì•¼ (ì„ íƒ)</label>
                    <input type="text" id="jobField" placeholder="ì˜ˆ: ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´, í™˜ê²½ ê³¼í•™ì">
                </div>

                <!-- ì²´í—˜ ë§Œì¡±ë„ (ë³„ì  - í•„ìˆ˜) -->
                <div class="input-group">
                    <label class="required">ì²´í—˜ ë§Œì¡±ë„ (ë³„ì )</label>
                    <div class="rating-stars flex items-center justify-start space-x-1">
                        <!-- 5ì  -->
                        <input type="radio" id="star5" name="rating" value="5" required>
                        <label for="star5" title="5ì "></label>
                        <!-- 4ì  -->
                        <input type="radio" id="star4" name="rating" value="4">
                        <label for="star4" title="4ì "></label>
                        <!-- 3ì  -->
                        <input type="radio" id="star3" name="rating" value="3">
                        <label for="star3" title="3ì "></label>
                        <!-- 2ì  -->
                        <input type="radio" id="star2" name="rating" value="2">
                        <label for="star2" title="2ì "></label>
                        <!-- 1ì  -->
                        <input type="radio" id="star1" name="rating" value="1">
                        <label for="star1" title="1ì "></label>
                    </div>
                </div>

                <!-- ì†Œê° ë° ë‚´ìš© (í•„ìˆ˜) -->
                <div class="input-group">
                    <label for="reportContent" class="required">ì†Œê° ë° ê¸°ë¡ ë‚´ìš©</label>
                    <textarea id="reportContent" rows="8" placeholder="ì²´í—˜ì„ í†µí•´ ë°°ìš°ê³  ëŠë‚€ ì , ì£¼ìš” í™œë™ ë‚´ìš©, ë‚˜ì˜ ì§„ë¡œì— ë¯¸ì¹œ ì˜í–¥ ë“±ì„ êµ¬ì²´ì ìœ¼ë¡œ ê¸°ë¡í•´ ì£¼ì„¸ìš”." required></textarea>
                </div>
            </div>
        </form>
        
        <!-- Streamlitìœ¼ë¡œ ìµœì¢… ì œì¶œ ì‹ í˜¸ë¥¼ ë³´ë‚¼ ë²„íŠ¼ (í¼ ë°”ê¹¥ì— ìœ„ì¹˜) -->
        <button id="submit-btn" onclick="sendDataToStreamlit(true)">ğŸš€ ë¦¬í¬íŠ¸ ì €ì¥í•˜ê¸°</button>

    </div>

    <script>
        /**
         * í¼ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  Streamlit Pythonìœ¼ë¡œ ì „ì†¡í•˜ëŠ” í•¨ìˆ˜
         * @param {boolean} isSubmission - ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì¸í•œ ìµœì¢… ì œì¶œì¸ì§€ ì—¬ë¶€
         */
        function sendDataToStreamlit(isSubmission) {
            // 1. ë°ì´í„° ìˆ˜ì§‘
            const ratingInput = document.querySelector('input[name="rating"]:checked');
            
            const reportData = {
                programName: document.getElementById('programName').value,
                experienceDate: document.getElementById('experienceDate').value,
                jobField: document.getElementById('jobField').value,
                // radio ë²„íŠ¼ì´ ì²´í¬ëœ ê²½ìš°ì—ë§Œ ê°’ì„ ê°€ì ¸ì˜¤ê³ , ì•„ë‹ˆë©´ nullë¡œ ì²˜ë¦¬
                rating: ratingInput ? parseInt(ratingInput.value) : null, 
                reportContent: document.getElementById('reportContent').value,
            };

            // 2. Streamlit Python ì»´í¬ë„ŒíŠ¸ë¡œ ë°ì´í„° ì „ì†¡
            // 'submitted' í”Œë˜ê·¸ë¥¼ ì¶”ê°€í•˜ì—¬ Pythonì—ê²Œ ì €ì¥í•  ë•Œì„ì„ ì•Œë¦¼
            Streamlit.setComponentValue({ 
                reportData: reportData,
                submitted: isSubmission 
            });
            
            // Streamlit ì»´í¬ë„ŒíŠ¸ ë†’ì´ ì—…ë°ì´íŠ¸
            Streamlit.setFrameHeight();
        }

        // 3. í˜ì´ì§€ ë¡œë“œ ì‹œ, ì´ˆê¸° ê°’ì„ Pythonìœ¼ë¡œ í•œ ë²ˆ ì „ì†¡ (í•„ìˆ˜)
        window.onload = function() {
            sendDataToStreamlit(false);
        };
        
        // í¼ì˜ oninput ì´ë²¤íŠ¸ì— ì˜í•´ sendDataToStreamlit(false)ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ í˜¸ì¶œë˜ì–´ ë°ì´í„° ì—…ë°ì´íŠ¸
    </script>
</body>
</html>
